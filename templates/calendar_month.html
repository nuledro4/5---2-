<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Календарь на месяц</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/calendar.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/calendar_month.css') }}">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4 text-start">Календарь на месяц</h1>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <button class="btn btn-secondary" title="Предыдущий месяц" onclick="window.location='/calendar/month{{ previous_month_link }}'">&lt;</button>
                <button class="btn btn-secondary" title="Следующий месяц" onclick="window.location='/calendar/month{{ next_month_link }}'">&gt;</button>
            </div>
            <div class="current-date ms-auto">
                {{ month_name }} {{ year }}
            </div>
        </div>

        <div class="text-end mb-3">
            <select class="form-select" name="select_calendar" id="select_calendar" style="width: auto;">
                <option value="day">День</option>
                <option value="week">Неделя</option>
                <option value="month" selected>Месяц</option>
            </select>
        </div>

        {% if month != current_month or year != current_year %}
            <div class="text-center mb-3">
                <button class="btn btn-primary" title="{{ current_day }} {{ current_month_name }} {{ current_year }}" onclick="window.location='/calendar/month/'">Сегодня</button>
            </div>
        {% endif %}

        <ul class="list-group list-group-horizontal text-center mb-3 calendar-header">
            {% for weekday_header in weekdays_headers %}
                <li class="list-group-item flex-fill weekday-header">{{ weekday_header }}</li>
            {% endfor %}
        </ul>

        <ul class="list-group list-group-horizontal flex-wrap calendar" id="calendar">
            {% for day in month_days %}
                <li class="list-group-item p-2 flex-fill {% if day.month != month %} bg-light other_month {% else %} bg-white {% endif %}" data-year="{{ day.year }}" data-month="{{ day.month }}" data-day="{{ day.day }}">
                    <button type="submit" class="btn btn-link text-decoration-none p-0" onclick="window.location='/calendar/day/{{day.year}}/{{day.month}}/{{day.day}}'">
                        {% if day.day == current_day and day.month == current_month and day.year == current_year %}
                            <span class="badge bg-primary">{{ day.day }}</span>
                        {% elif days_of_events and day.day in days_of_events %}
                            <span class="badge bg-success">{{ day.day }}</span>
                        {% else %}
                            <span>{{ day.day }}</span>
                        {% endif %}
                    </button>
                </li>
            {% endfor %}
        </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/select_calendar.js') }}"></script>
</body>
</html>
